name: Deploy to GCP

on:
  push:
    branches-ignore: "master"

jobs:
  build:
    name: Deploy to GCP
    runs-on: ubuntu-latest
    steps:
      - name: Setup Google Cloud SDK
        run: |
          echo ${{ secrets.GCP_SA_KEY_b64 }} | base64 --decode > ./gcloud-service-key.json
          gcloud auth activate-service-account \
            --key-file=./gcloud-service-key.json
          gcloud --quiet config set project ${GCP_PROJECT_ID}
      - run: gsutil rsync _site/ gs://j-volpe-com/_site
